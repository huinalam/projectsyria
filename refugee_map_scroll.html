<!DOCTYPE html>
<html>
<head>
    <title></title>
    <link href="css/main_structure.css" rel="stylesheet">
    <link href="css/refugee_map_scroll.css" rel="stylesheet">
    <link href="css/gdp_compare.css" rel="stylesheet">
</head>
<body>
    <secttion>
        <div class="chapter_main_div chapter_title">
            <div class="chapter_title_div">
                <h1>
                    SYRIAN REFUGEE DISTRIBUTION<br>
                    MAP OF THE IMBALANCE
                </h1>
            </div>
            <div class="chapter_introduction_div">
                <p>
                    We've seen the imbalance of refugees distribution in Middle East by means of economic scope. Please look at the Scatter plot below. Axis x represents GDP of Middle East nations and axis y does the number of refugee acceptance. The size of circle reflects the number of refugees divided by GDP per capita, which indicates the number of refugees in comparison to each countries' relative economic status.
                </p>
            </div>
        </div>
    </secttion>
    <section>
        <div class="chapter_main_div chapter_title" id="refugee_map">
            <div class="chapter_chart_div_s86" id="fixed_chart">
                <div class="map_div_map"></div>
                <div class="map_div_number">
                    <div class="map_div_total"></div>
                    <div class="map_div_portion"></div>
                </div>
            </div>
            <div class="map_div_article" id="map_div_article" style="width: 300px; position: static">
                <div class="chapter_article chapter_article_div div_s30" id="map_article_p1">
                    <h2>2011<br>Pre-War Period</h2>
                    <p>
                        Before Syrian Civil War, political suppression of Assads' family more than 50 years led its own people to leave for the new destinations. According to UNHCR, 13,718 Syrian refugees were registered in 2011. 95% of those people stayed within Europe that year, while Germany accepted the largest portion of 10,155 refugees among European countries.
                    </p>
                </div>
                <div class="chapter_article chapter_article_div div_s30" id="map_article_p2">
                    <h2>2012<br>Escalation results in surge of refugees</h2>
                    <p>The number of Syrian refugees skyrocketed in the mid of 2012 when the military provocations were at its semi-apex: sieges posed both by Assad regime and anti-government forces. Accordingly, Syrian people started to abandon their motherlands – the number reached 50 times as many as those who had left in 2011. Enormous diaspora reversed the distribution of refugees in inter-continental context, taking 96% of them in Middle Eastern region. Majority of refugees moved toward surrounding nations of Turkey, Iraq, Jordan and Lebanon - Turkey accepted the largest of 24,866 refugees.</p>
                </div>
                <div class="chapter_article chapter_article_div div_s30" id="map_article_p3">
                    <h2>2013<br>Culmination of Migrant Crisis: not only issue of EU<br></h2>
                    <p>The year 2012 came to a head of having the largest number of victims and refugees ever recorded. The number of victims (2,415,374 in total) surged again 30 times more than that of last year and 98% of them came to stay in Middle East. As the incident got worsened, European countries have become at stake due to massive influx of refugees from Afghanistan and Syria, naming this phenomenon as European Migrant Crisis. However, Syrian neighbors had already accepted 50 times greater number of refugees than European countries did at this point.</p>
                </div>
                <div class="chapter_article chapter_article_div div_s30" id="map_article_p4">
                    <h2>2014<br>Imalance of Distribution</h2>
                    <p>The result of analyzing the distribution of Syrian refugees in two continents shows two aspects of imbalance. First of all, XXX % of refugees have been staying in Germany and Sweden whereas Gulf states have showed its extreme reluctance for welcoming migrants. In 2014, it is said that only 18 Syrian refugees were accepted to stay in Saudi Arabia with its highest GDP figure in Gulf region.</p>
                </div>
            </div>
            <div class="chapter_article_div map_div_linegraph div_s30" id="fixed_graph" style="z-index: -1; position: absolute">
            </div>
        </div>
    </section>
    <secttion>
        <section id="section_bottom">
            <!---------------------->
            <!--차트 아래 내용 입력란-->
            <!---------------------->
        </section>
        <div class="chapter_main_div chapter_title" style="padding-top: 300px">
            <div class="chapter_title_div">
                <h1>
                    IMBALANCE IN MIDDLE EAST:<br>
                    PERSIAN GULF&#39;s NEGLECT
                </h1>
            </div>
            <div class="chapter_introduction_div">
                <p>Imbalanced distribution of refugees is confirmed on the map above. UNHCR calculated $4,552,032,037 for a total sum of funds with a view to supporting currently-enrolled refugees, of which only 7% of them have been funded. Eventually, the finance is essential to help the refugees survive and sustain fundamental quality of living, whereas a nation can't finance all the expenses for the refugees.</p>

                <p>
                    We've seen the imbalance of refugees distribution in Middle East by means of economic scope. Please look at the Scatter plot below. Axis x represents GDP of Middle East nations and axis y does the number of refugee acceptance. The size of circle reflects the number of refugees divided by GDP per capita, which indicates the number of refugees in comparison to each countries' relative economic status.
                </p>
            </div>
        </div>
    </secttion>
    <section>
        <div class="chapter_main_div" id="gdp_compare">
            <div class="chapter_chart_div_s86">
                <div class="gdp_div_GraphCol" id='scatter_chart'>
                </div>
                <div class="scatter_exp">
                    <p>Please click the below years to compare number of refugees on the scatter plot</p>
                </div>
                <div class="gdp_div_textCol gdp_year_button2011">
                    <div class="gdp_year_button gdp_year_button2011"><h2>2011</h2></div>
                    <p>No significant characteristics were found in 2011 in terms of refugees since only 700 refugees were staying in Middle East. However, it is possible at least to compare GDP by nations: Saudi Arabia, a persian gulf-nation highest, Turkey, the second and Egypt, UAE and Iraq in order.</p>
                </div>
                <div class="gdp_div_textCol gdp_year_button2012">
                    <div class="gdp_year_button gdp_year_button2012"><h2>2012</h2></div>
                    <p>After a breakout of civil war, the number of refugees jumped in 2012, leading almost equivalent influx toward Turkey and Jordan. The location and scale of circle shows that Jordan took relatively larger burden in accepting refugees.</p>
                </div>
                <div class="gdp_div_textCol gdp_year_button2013">
                    <div class="gdp_year_button gdp_year_button2013"><h2>2013</h2></div>
                    <p>Notably, the rapid increase of refugees was found in Jordan and Lebanon, while Iraq accepted the largest number of refugees among Gulf nations.</p>
                </div>
                <div class="gdp_div_textCol gdp_year_button2014">
                    <div class="gdp_year_button gdp_year_button2014"><h2>2014</h2></div>
                    <p>In 2014, Turkey and Lebanon saw dramatic surge in terms of Syrian refugees staying within its border. The circle of Turkey shows that it takes holds of considerable economic difficulty in supporting current refugees even though the republic has the second highest GDP in Middle East region</p>
                </div>
            </div>
            <div class="chapter_article_div div_s30">
                <h2>Arab Conscience</h2>
                <p>A scatter chart on the left suggests that imbalanced acceptance of refugees may lead economic pressure in some nations. Consequently, financial support to help sustain daily lives can’t reach large portion of the displaced.</p>
                <p>Among Gulf nations, Kuwait donated USD 165 million and Saudi Arabia decided to build up medical center for refugees in Yemen.</p>
                <p>In spite of financial support, Lebanon is expected to have USD 7.6 billion loss in terms of economic activities and USD 1.6 billion increase in terms of government expenditure. Meanwhile, in February 2016 Jordan hoped to find donor partners in London to relieve its burden due to its debt-riddled economy and also drop of medical reserves nationwide, which may result in adverse impact on domestic health issues.</p>
                <p>Nonetheless, Gulf Co-operation Council members have been reluctant to share more supportive actions due to some reasons such as: strict visa system and the status of the workers; doubts upon influx of anti-regime group of ISIS.</p>
            </div>
        </div>
    </section>


    <script src="js/jquery-2.1.4.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js" charset="utf-8"></script>
    <script src="js/refugee_map_world_map.js"></script>
    <script src="js/mapTransition.js"></script>
    <script src="js/refugee_map_linegraph.js"></script>
    <script src="js/portion_pie_chart.js"></script>
    <script src="js/gdp_refugee_scatter.js"></script>
    <script>
        $(document).ready(function () {

            var $window = $(window);


            /******************************/
            /********* GDP 이밴트  *********/
            /******************************/
            /** EVENT HANDLER **/
            $(".gdp_div_textCol").on("click", function () {
                var classfy = $(this).attr('class').split(/\s+/);
                switch (classfy[1]) {
                    case "gdp_year_button2011":
                        scatterTransition(2011);
                        break;
                    case "gdp_year_button2012":
                        scatterTransition(2012);
                        break;
                    case "gdp_year_button2013":
                        scatterTransition(2013);
                        break;
                    case "gdp_year_button2014":
                        scatterTransition(2014);
                        break;
                }
            });

            /** CHAPTER TITLE SETTING **/
            function chapter_title_size_setting() {
                $(".chapter_title").css("height", window.innerHeight);
            }

            /** REFUGEE MAP SECTION SET POSITION **/
            function section1_setposition() {

                var section_offset = parseInt($('#refugee_map').offset().top);
                var section_left = parseInt($('#refugee_map').css("margin-left"));
                var section_top = parseInt($('#refugee_map').css("margin-top"));
                var map_width = parseInt($(".map_div_map").css("width"));
                var map_years_height = parseInt($(".map_div_years").css("height"));



                //console.log(section_left);
                //console.log(section_top);
                //console.log(map_years_height);

                $(".map_div_linegraph").css("left", section_left + map_width);
                $(".map_div_linegraph").css("top", section_offset + section_top + map_years_height);
                $(".map_div_article").css("left", section_left + map_width);
                $(".map_div_article").css("top", section_offset + section_top + map_years_height);
            }

            function section1_initialSetting() {

            }

            chapter_title_size_setting();
            section1_setposition();
            section1_initialSetting();



            /******************************/
            /******* timeline 이밴트 *******/
            /******************************/
            // 높이 설정
            // div로 gap을 주는 대신에, padding 값을 주었음
            $(".chapter_article").css({
                "padding-top": window.innerHeight / 2,
                "padding-bottom": window.innerHeight / 2
            });
            // 처음 content의 padding-top은 0으로
            $(".chapter_article").eq(0).css({
                "padding-top": 0
            });

            //fixed_chart
            //fixed_graph
            var chart_width = $("#fixed_chart").width();
            var chatper_divs = $(".chapter_article");
            var chapter_offset_top = [];
            for (var i = 0; i < chatper_divs.length; i++) {
                chapter_offset_top[i] = parseInt(chatper_divs.eq(i).offset().top);
            }
            // 초기 고정
            $('#map_div_article').css({
                "padding-left": chart_width
            });

            var $fixed_graph = $('#fixed_graph');
            var $fixed_chart = $('#fixed_chart');
            var $map_div_article = $('#map_div_article');

            function fix_chart() {
                var section_left = parseInt($('#refugee_map').css("margin-left"));
                var section_top = parseInt($('#refugee_map').css("margin-top"));

                $fixed_graph.css({
                    position: "fixed",
                    top: section_top
                    //"padding-left": chart_width + 30 // 마진 값 30
                });

                $fixed_chart.css({
                    position: "fixed",
                    top: section_top,
                    left: section_left + 8
                });

                $map_div_article.css({
                    "padding-left": chart_width
                });
            }

            function unfix_chart() {
                $fixed_graph.css({
                    "position": "absolute",
                    "top": $("#refugee_map").offset().top
                });
                $fixed_chart.css({
                    "position": "absolute",
                    "top": $("#refugee_map").offset().top
                });
            }
            function unfix_chart_bottom(timeline_bottom) {
                $fixed_graph.css({
                    "position": "absolute",
                    "top": timeline_bottom
                });
                $fixed_chart.css({
                    "position": "absolute",
                    "top": timeline_bottom
                });
            }

            var $section_bottom = $("#section_bottom");
            function scroll_event() {
                var scroll_top = $window.scrollTop();
                var timeline_bottom = parseInt($section_bottom.offset().top) - parseInt($fixed_chart.height());
                // ==> start Scroll
                if (window.innerHeight < scroll_top && timeline_bottom > scroll_top) {
                    //console.log("fix_chart");
                    fix_chart();
                } else {
                    if (timeline_bottom < scroll_top) {
                        //console.log("unFix bottom");
                        unfix_chart_bottom(timeline_bottom);
                    } else {
                        //console.log("unfix_chart");
                        unfix_chart();
                    }
                }
                // <== end Scroll
                // ==> start chapter
                for (var idx = chapter_offset_top.length - 1; idx >= 1 ; idx--) {
                    if (chapter_offset_top[idx] < scroll_top) {
                        // *****************
                        // 2번째 챕터 이벤트
                        // *****************
                        //console.log("event : " + idx);
                        //intro_popYear(chapter_list[idx]);
                        break;
                    }
                }
                if (chapter_offset_top[1] > scroll_top) {
                    // *****************
                    // 첫번째 챕터 이벤트
                    // *****************
                    //console.log("first event");
                    //intro_popYear(chapter_list[0]);
                    return;
                }
                // <== end chapter
            }


            /******************************/
            /******* Window 이밴트  ********/
            /******************************/
            $window.resize(function () {
                section1_setposition();
                resize_refugeeMap(); //refugee map 리사이즈;
                resize_linegraph(); // 2011~ 난민 linegrpah 리사이즈;
                chapter_title_size_setting();
                scroll_event();
            });

            //** ON_SCROLL EVENT **//
            $window.on('scroll', function () {
                scroll_event();
            });
        });
    </script>
</body>
</html>